"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[59],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>r});var s=i(96540);const a={},t=s.createContext(a);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),s.createElement(t.Provider,{value:n},e.children)}},62514:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"validation/proposer-consensus-and-selection-mechanism","title":"Proposer Consensus and Selection Mechanism","description":"Consensus & Selection Mechanism","source":"@site/docs/validation/PAW Validator Consensus and Selection Mechanism.mdx","sourceDirName":"validation","slug":"/validation/proposer-consensus-and-selection-mechanism","permalink":"/ko/validation/proposer-consensus-and-selection-mechanism","draft":false,"unlisted":false,"editUrl":"https://crowdin.com/project/docusaurus-v2/ko","tags":[],"version":"current","frontMatter":{"id":"proposer-consensus-and-selection-mechanism","slug":"/validation/proposer-consensus-and-selection-mechanism","sidebar_label":"Consensus & Selection Mechanism","description":"Consensus & Selection Mechanism"},"sidebar":"docs","previous":{"title":"PAW Validator Architecture","permalink":"/ko/validation/validator-architecture"},"next":{"title":"Delegators","permalink":"/ko/category/delegators"}}');var a=i(74848),t=i(28453);const l={id:"proposer-consensus-and-selection-mechanism",slug:"/validation/proposer-consensus-and-selection-mechanism",sidebar_label:"Consensus & Selection Mechanism",description:"Consensus & Selection Mechanism"},r="Proposer Consensus and Selection Mechanism",o={},d=[{value:"Selection Process of the Proposer for the Transaction",id:"selection-process-of-the-proposer-for-the-transaction",level:2},{value:"<strong>New Validator Selection Process and Reward/Penalty Calculations</strong>",id:"new-validator-selection-process-and-rewardpenalty-calculations",level:3},{value:"<strong>1. Validator Selection and Reward/Penalty Calculation (Wallet Side)</strong>",id:"1-validator-selection-and-rewardpenalty-calculation-wallet-side",level:3},{value:"<strong>Step 1: Selecting 5 Validators</strong>",id:"step-1-selecting-5-validators",level:3},{value:"<strong>Weighted Random Selection of a Validator</strong>",id:"weighted-random-selection-of-a-validator",level:3},{value:"<strong>Step 2: Reward and Penalty Calculation</strong>",id:"step-2-reward-and-penalty-calculation",level:3},{value:"<em>Example Calculation:</em>",id:"example-calculation",level:3},{value:"<strong>Step 3: Checking Validator Activity</strong>",id:"step-3-checking-validator-activity",level:3},{value:"<strong>Step 4: Finalizing Active Validators</strong>",id:"step-4-finalizing-active-validators",level:3},{value:"<strong>2. Transaction Validation (PAW Validator Application Side)</strong>",id:"2-transaction-validation-paw-validator-application-side",level:3},{value:"<strong>Step 5: Receiving the Transaction and Assigning Roles</strong>",id:"step-5-receiving-the-transaction-and-assigning-roles",level:3},{value:"<strong>Step 6: Hash Generation and Verification</strong>",id:"step-6-hash-generation-and-verification",level:3},{value:"<strong>Step 7: Consensus-Based Validation</strong>",id:"step-7-consensus-based-validation",level:3},{value:"<strong>Step 8: Final Response to PAW Chain Node</strong>",id:"step-8-final-response-to-paw-chain-node",level:3},{value:"Transaction Validation Process",id:"transaction-validation-process",level:2},{value:"How Penalty Works?",id:"how-penalty-works",level:2}];function c(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"proposer-consensus-and-selection-mechanism",children:"Proposer Consensus and Selection Mechanism"})}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Who is a Proposer?"})}),(0,a.jsx)(n.p,{children:"The Proposer is a validator with the highest number of stake amounts."})]}),"\n",(0,a.jsxs)(n.admonition,{type:"info",children:[(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"What is the role of the Proposer?"})}),(0,a.jsx)(n.p,{children:"In the proposer selection process, validators with the highest staked amounts have the highest probability of being selected as the proposer. When a validator is chosen, the system first checks whether the validator is active:"})]}),"\n",(0,a.jsx)(n.h2,{id:"selection-process-of-the-proposer-for-the-transaction",children:"Selection Process of the Proposer for the Transaction"}),"\n",(0,a.jsx)(n.h3,{id:"new-validator-selection-process-and-rewardpenalty-calculations",children:(0,a.jsx)(n.strong,{children:"New Validator Selection Process and Reward/Penalty Calculations"})}),"\n",(0,a.jsx)(n.p,{children:"The updated validator selection and reward/penalty calculation process consists of two main parts:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Validator Selection and Reward/Penalty Calculation (Wallet Side)"}),"\n",(0,a.jsx)(n.li,{children:"Transaction Validation (PAW Validator Application Side)"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"1-validator-selection-and-rewardpenalty-calculation-wallet-side",children:(0,a.jsx)(n.strong,{children:"1. Validator Selection and Reward/Penalty Calculation (Wallet Side)"})}),"\n",(0,a.jsx)(n.h3,{id:"step-1-selecting-5-validators",children:(0,a.jsx)(n.strong,{children:"Step 1: Selecting 5 Validators"})}),"\n",(0,a.jsx)(n.h3,{id:"weighted-random-selection-of-a-validator",children:(0,a.jsx)(n.strong,{children:"Weighted Random Selection of a Validator"})}),"\n",(0,a.jsxs)(n.p,{children:["The selection process is based on the ",(0,a.jsx)(n.strong,{children:"staked amounts"})," of validators, ensuring that those with higher stakes have a greater probability of being chosen. The function then enters a loop to randomly select validators based on their weight."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Calculate Total Staked Value"})}),"\n",(0,a.jsx)(n.li,{children:"Sum the staked amounts of all available validators."}),"\n",(0,a.jsx)(n.li,{children:"This total defines the probability distribution for selection."}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Generate a Weighted Random Number"})}),"\n",(0,a.jsx)(n.li,{children:"A random number is generated in the range 0 to total staked value."}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Iterate Through Validators for Selection"})}),"\n",(0,a.jsx)(n.li,{children:"The function iterates through the list of validators, subtracting each validator\u2019s staked amount from the random number."}),"\n",(0,a.jsx)(n.li,{children:"The process continues until the random number reaches zero or becomes negative."}),"\n",(0,a.jsx)(n.li,{children:"The validator at this point is selected, ensuring that validators with higher stakes have a higher chance of being chosen."}),"\n",(0,a.jsx)(n.li,{children:"The function selects up to 5 validators for the transaction based on their staked amount."}),"\n",(0,a.jsx)(n.li,{children:"If fewer than 5 validators are available, the process continues with the available validators."}),"\n",(0,a.jsx)(n.li,{children:"The higher the staked amount, the greater the chance of being selected."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"step-2-reward-and-penalty-calculation",children:(0,a.jsx)(n.strong,{children:"Step 2: Reward and Penalty Calculation"})}),"\n",(0,a.jsx)(n.p,{children:"For the selected validators, reward and penalty are calculated based on their staked amount:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Get the total staked amount of all selected validators."}),"\n",(0,a.jsx)(n.li,{children:"Calculate each validator\u2019s stake percentage relative to the total stake."}),"\n",(0,a.jsx)(n.li,{children:"Take 80% of the validators' potion from the processing fee as the total pool for reward/penalty"}),"\n",(0,a.jsx)(n.li,{children:"Distribute the reward and penalty among validators based on their stake percentage."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"example-calculation",children:(0,a.jsx)(n.em,{children:"Example Calculation:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"Processing Fee = $100"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"80% of Processing Fee = $80"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Selected Validators and Stakes:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"Validator A \u2192 15,000"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"Validator B \u2192 14,000"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"Validator C \u2192 3,000"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"Validator D \u2192 2,000"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"Validator E \u2192 500"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"Total Stake = 34,500"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"Each Validator's Reward/Penalty Calculation:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"Stake Percentage = (Validator's Stake / Total Stake) * 100"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.em,{children:"Reward/Penalty = 80% Processing Fee * Stake Percentage"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"step-3-checking-validator-activity",children:(0,a.jsx)(n.strong,{children:"Step 3: Checking Validator Activity"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Each selected validator is checked for activity."}),"\n",(0,a.jsxs)(n.li,{children:["If the validator is inactive:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"The validator receives the calculated penalty and is removed from the selection."}),"\n",(0,a.jsx)(n.li,{children:"If the validator has lockers, each locker also receives a proportional penalty."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["If the validator is active:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"The validator remains in the selection process."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"step-4-finalizing-active-validators",children:(0,a.jsx)(n.strong,{children:"Step 4: Finalizing Active Validators"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Only active validators are sent back to complete the transaction."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"2-transaction-validation-paw-validator-application-side",children:(0,a.jsx)(n.strong,{children:"2. Transaction Validation (PAW Validator Application Side)"})}),"\n",(0,a.jsx)(n.h3,{id:"step-5-receiving-the-transaction-and-assigning-roles",children:(0,a.jsx)(n.strong,{children:"Step 5: Receiving the Transaction and Assigning Roles"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["The validator with the highest stake from the selected list is assigned as the ",(0,a.jsx)(n.strong,{children:"Proposer"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["The remaining selected validators become ",(0,a.jsx)(n.strong,{children:"Verifiers"}),", responsible for validating the transaction."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"step-6-hash-generation-and-verification",children:(0,a.jsx)(n.strong,{children:"Step 6: Hash Generation and Verification"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Proposer creates a SHA-256 hash of the transaction and broadcasts it to the verifiers."}),"\n",(0,a.jsx)(n.li,{children:"Verifiers compare the received hash with their own hash that is generated from the same transaction data."}),"\n",(0,a.jsxs)(n.li,{children:["Each verifier submits a vote:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:'If the hash matches, they vote "equal".'}),"\n",(0,a.jsx)(n.li,{children:'If the hash does not match, they vote "not equal".'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"step-7-consensus-based-validation",children:(0,a.jsx)(n.strong,{children:"Step 7: Consensus-Based Validation"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"The majority decision determines the transaction status."}),"\n",(0,a.jsx)(n.li,{children:'If the number of "equal" votes exceeds "not equal" votes, the transaction is successfully validated.'}),"\n",(0,a.jsx)(n.li,{children:"Otherwise, validation fails."}),"\n",(0,a.jsx)(n.li,{children:"Any verifier that submits an incorrect hash (not matching the consensus) receives a penalty."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"step-8-final-response-to-paw-chain-node",children:(0,a.jsx)(n.strong,{children:"Step 8: Final Response to PAW Chain Node"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"The validation result (success or failure) is sent back to the PAW Chain Node."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"transaction-validation-process",children:"Transaction Validation Process"}),"\n",(0,a.jsxs)(n.p,{children:["The selected validator, known as the ",(0,a.jsx)(n.strong,{children:'"Proposer",'})," sends the encrypted hash to the remaining validators. Each time a transaction occurs, the PAW Chain Node securely processes and transmits data to the validators using FERNET encryption. The process is as follows:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Each time a transaction happens, the 5 selected validators for the transaction are identified."}),"\n",(0,a.jsx)(n.li,{children:"The selected validators' details are merged with the transaction dataset. This ensures all necessary information is included for validation."}),"\n",(0,a.jsx)(n.li,{children:"The combined data is encoded using FERNET encryption, providing a secure way to transfer sensitive information."}),"\n",(0,a.jsx)(n.li,{children:"The FERNET-encrypted transaction data is transmitted to the validator application for processing."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Each validator compares the received hash with their own hash from the wallet. If the hashes match, they send a confirmation response."}),"\n",(0,a.jsx)(n.p,{children:"The process is validated based on majority consensus."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"For example, let us assume there are four validators including the proposer, among the four validators, if two validators' hashes match the proposer's hash while one does not, the ratio becomes 3:1, indicating a successful validation."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Once validation is successful, the data is saved in the database, and a confirmation message appears on the wallet side, stating"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:'"Transaction Successful"'})}),"\n",(0,a.jsx)(n.h1,{id:"penalty-mechanism-for-inactive-validators",children:"Penalty Mechanism for Inactive Validators"}),"\n",(0,a.jsx)(n.h2,{id:"how-penalty-works",children:"How Penalty Works?"}),"\n",(0,a.jsx)(n.p,{children:"The Penalty mechanism ensures the availability of the proposer. If the proposer is not available, that validator is given the penalty."}),"\n",(0,a.jsxs)(n.p,{children:["During each transaction, a validator is chosen based on probability rather than randomness. To be eligible as a proposer, a validator must have a minimum stake amount of ",(0,a.jsx)(n.strong,{children:"1 trillion"}),". The validator with the highest stake is prioritized as the proposer."]}),"\n",(0,a.jsx)(n.p,{children:"Once a proposer is selected, the system checks their status:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"If the proposer is inactive, a penalty is applied."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"The penalty calculation is as follows:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"80% of the processing fee will be added as the validator's penalty."}),"\n",(0,a.jsx)(n.li,{children:"The lockers will receive penalties based on their contribution."}),"\n",(0,a.jsx)(n.li,{children:"Processing Fee of the transaction is used for adding penalties."}),"\n",(0,a.jsx)(n.li,{children:"The same amount as the validator's portion of the processing fee is deducted from the staked amount."}),"\n",(0,a.jsx)(n.li,{children:"If the proposer has existing penalties, the new penalty is added to the total"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Processing fee is used to calculate the penalty for the deduction and and applied to both validators and lockers as follows:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Applying Penalty to the Validator"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"If the validator already has an existing penalty, the current processing fee is added to the previous penalty."}),"\n",(0,a.jsx)(n.li,{children:"If the validator has no previous penalty, the processing fee is assigned as the penalty."}),"\n",(0,a.jsxs)(n.li,{children:["Applying Penalty to Lockers","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Since lockers help fulfill the stake gap for validators, they also share the penalty proportionally. The process follows these steps:"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Calculate the stake gap (balance value):"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"balanceValue = Validator_Stake_Limit - main validator\u2019s staked amount"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Determine each locker\u2019s percentage contribution to the stake gap:"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"lockerPercentage = (locker\u2019s staked amount / balanceValue) x 100"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Calculate the locker\u2019s penalty amount"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"lockerNewPenalty = (delagatorPercentage / 100) x penaltyFee (processingFee)"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Update the locker\u2019s total penalty"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"lockerPenalty = previousPenalty + lockerNewPenalty"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["This ensures that penalties are ",(0,a.jsx)(n.strong,{children:"fairly distributed"})," among lockers based on their stake"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);